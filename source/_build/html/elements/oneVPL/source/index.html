

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>oneVPL 0.7 &mdash; oneAPI Specification 0.7 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicons.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="oneMKL 0.7" href="../../oneMKL/source/index.html" />
    <link rel="prev" title="tick_count class" href="../../oneTBB/source/timing/tick_count_cls.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneAPI Specification
          

          
            
            <img src="../../../_static/oneAPI-rgb-rev-100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../library-interop.html">Library Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../elements.html">oneAPI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dpcpp/source/index.html">DPC++ 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oneDPL/source/index.html">oneDPL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oneDNN/source/index.html">oneDNN 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oneCCL/source/index.html">oneCCL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../l0/source/index.html">Level Zero 0.91</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oneDAL/source/index.html">oneDAL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oneTBB/source/nested-index.html">oneTBB 0.7</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">oneVPL 0.7</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#device-discovery">Device Discovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="#device-context">Device Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="#workstream-settings">Workstream Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#workstream">Workstream</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#workstream-internals">Workstream Internals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#initialization-sequence">Initialization Sequence</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dynamic-setting-control">Dynamic Setting Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decode">Decode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#encode">Encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#video-processing">Video Processing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#vpl-memory">VPL Memory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-memory-objects">Creating memory objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#helper-class-for-simplifying-image-data-access">Helper Class for Simplifying Image Data Access</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#vpl-api-reference">VPL API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#device">Device</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vpl-deviceinfo">vpl::DeviceInfo</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#device-context-api">Device Context</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vpl-devicecontext">vpl::DeviceContext</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#config-setting-api">Workstream Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vpl-vplparams">vpl::VplParams</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#decode-settings">Decode Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vpl-vplparamsdecode">vpl::VplParamsDecode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#encode-settings">Encode Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vpl-vplparamsencode">vpl::VplParamsEncode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#workstreams">Workstreams</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vplworkstreamtype">VplWorkstreamType</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Workstream</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vpl-workstream">vpl::Workstream</a></li>
<li class="toctree-l4"><a class="reference internal" href="#workstream-decode">Workstream::Decode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#workstream-encode">Workstream::Encode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#workstream-videoprocess">Workstream::VideoProcess</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memory">Memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vplm-cpu-image">vplm::cpu_image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplm-memory">vplm::memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplm-cpu-memory">vplm::cpu::memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">vplm::cpu::image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplm-cpu-make-memory">vplm::cpu::make_memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplm-opencl-memory">vplm::opencl::memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplm-opencl-image">vplm::opencl::image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplm-opencl-make-memory">vplm::opencl::make_memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplm-sycl-memory">vplm::sycl::memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplm-sycl-make-memory">vplm::sycl::make_memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplm-vaapi-memory">vplm::vaapi::memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplm-vaapi-image">vplm::vaapi::image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplm-vaapi-make-memory">vplm::vaapi::make_memory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#miscellaneous">Miscellaneous</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#vplstatus">vplStatus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplcodectype">VplCodecType</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplfourcc">VplFourCC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplcrop">VplCrop</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplaspectratio">VplAspectRatio</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplencodepreset">VplEncodePreset</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplencodescenario">VplEncodeScenario</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplbrc">VplBRC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplframerate">VplFrameRate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplversion">VplVersion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vplloglevel">vplLogLevel</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../oneMKL/source/index.html">oneMKL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../versions.html">HTML and PDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../notices.html">Legal Notices and Disclaimers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">oneAPI Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">oneAPI Specification</a> &raquo;</li>
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/oneapi-src/oneapi-spec/blob/master/source/elements/oneVPL/source/index.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="onevpl-vpl-version">
<span id="onevpl-section"></span><h1>oneVPL 0.7<a class="headerlink" href="#onevpl-vpl-version" title="Permalink to this headline">¶</a></h1>
<p>The oneAPI Video Processing Library is a programming interface for video processing and video analytics,
focusing on building portable media pipeline on CPU, GPU, Deep Learning (DL)
accelerators and FPGA. It aims for function and performance portability such that
applications built with oneVPL can be efficiently executed on the current and future
generation hardware without modification. oneVPL library provides the following features:</p>
<ol class="arabic simple">
<li><p>Cross architecture building blocks for Decode, Video Processing, Encode and
DL based video analytics.</p></li>
<li><p>A VPL-Memory Library for image object passing among media, compute and 3D rendering
phases of a video analytics pipeline, with zero-copying buffer sharing
among CPU, GPU, DL accelerators and FPGA.</p></li>
<li><p>Device discovery and device selection query interface for video and DL operations.</p></li>
</ol>
<p>Intel’s implementation of VPL will be hosted at
<a class="reference external" href="https://software.intel.com/en-us/oneapi">https://software.intel.com/en-us/oneapi</a>/vpl# with each public release.</p>
<p>See <a class="reference internal" href="#vpl-api-reference">VPL API Reference</a> for the detailed API description.</p>
<div class="section" id="device-discovery">
<h2>Device Discovery<a class="headerlink" href="#device-discovery" title="Permalink to this headline">¶</a></h2>
<p><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::DeviceInfo</span></code> defines a device and property query interface.
At runtime, VPL discovers available devices declared in <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">VplDeviceType</span></code>,
the number of devices of each type (<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vpl::DeviceInfo::GetDeviceCount()</span></code>),
and <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">vpl::VplDeviceProperty</span></code> of each device (<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vpl::DeviceInfo::GetDeviceProperty()</span></code>).</p>
<p>This class also provides two important member functions:</p>
<ol class="arabic simple">
<li><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vpl::DeviceInfo::GetPreferredDevice()</span></code>: get a preferred device instance <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">vpl::DeviceInstance</span></code> for a <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::Workstream</span></code> (<a class="reference internal" href="#id1">workstream</a>)</p></li>
<li><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vpl::DeviceInfo::GetPreset()</span></code>: get the device preset configuration for a <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">VplWorkstreamType</span></code> and a device instance</p></li>
</ol>
<p>We recommend the following code sequence to select a device and get the device’s preset
configuration parameters before creating a <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Workstream</span></code> on a device:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Find all the devices in the system and select a preferred device</span>
<span class="n">DeviceInfo</span> <span class="o">*</span><span class="n">dinfo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DeviceInfo</span><span class="p">();</span>
<span class="n">DeviceInstance</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="n">dinfo</span><span class="o">-&gt;</span><span class="n">GetPreferredDevice</span><span class="p">(</span><span class="n">VPL_WORKSTREAM_DECODE</span><span class="p">);</span>

<span class="c1">// Get decode preset</span>
<span class="n">config</span><span class="o">::</span><span class="n">VPLParams</span> <span class="o">*</span><span class="n">dconfig</span> <span class="o">=</span> <span class="n">dinfo</span><span class="o">-&gt;</span><span class="n">GetPreset</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_dtype</span><span class="p">,</span> <span class="n">VPL_WORKSTREAM_DECODE</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_id</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="device-context">
<h2>Device Context<a class="headerlink" href="#device-context" title="Permalink to this headline">¶</a></h2>
<p><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::DeviceContext</span></code> defines a device’s driver context and
command queue for VPL operations. Depending on the underlying operating systems and workstream operations,
the low level device contexts can be VAAPI, DX, OCL, GL for media, compute and rendering operations.
This class hides the details of the low level contexts, while enabling context sharing among several workstreams.</p>
<p>This class provides the following functions:</p>
<ol class="arabic simple">
<li><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vpl::DeviceContext::DeviceContext()</span></code>: create a new device context on a device</p></li>
<li><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vpl::DeviceContext::AddWorkstream()</span></code>: add a workstream sharing the device context</p></li>
<li><p><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vpl::DeviceContext::RemoveWorkstream()</span></code>: remove a workstream for the device context</p></li>
</ol>
<p>The device context is usually created implicitly inside the <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::Workstream</span></code> constructor.
Application programmers can also create it explicitly to share the context with multiple workstreams.</p>
</div>
<div class="section" id="workstream-settings">
<h2>Workstream Settings<a class="headerlink" href="#workstream-settings" title="Permalink to this headline">¶</a></h2>
<p><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VplParams</span></code> defines the parameter settings for decode, video processing, encode
and DL inference. It addresses two aspects of video processing:</p>
<ul class="simple">
<li><p>Easy to use device independent parameter settings for VPL application developers</p></li>
<li><p>Easy to translate into device dependent settings for VPL hardware plugin writers</p></li>
</ul>
<p>This class provides common settings for video processing in <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VplParams</span></code>, such as
input/output formats, resolutions, frame rates, crop factors, aspect ratios, and operation
specific settings in <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VplParamsDecode</span></code> and <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VplParamsEncode</span></code>,
such as CODEC type, input/output buffer sizes, encoding bit rate control, and GOP
structure parameters.</p>
<p>In the near future, oneVPL will support target devices running autonomously on different nodes,
where parameter settings need to be passed across host boundaries similar to
gRPC. We will extend <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VplParams</span></code> to include serialization and deserialization
of the parameters as messages. We are also evaluating general message packages such as protobuf
as we finalize the API.</p>
<p>Note that vendor specific extensions can be supported by subclassing
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VplParams</span></code> to expose them to oneVPL application developers.</p>
</div>
<div class="section" id="workstream">
<h2>Workstream<a class="headerlink" href="#workstream" title="Permalink to this headline">¶</a></h2>
<p id="id1">The <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::Workstream</span></code> class is the core of the VPL interface.  It represents a
media building block running decode, frame processing, DL inference and
encode operations on a single device context. Workstreams can be offloaded to
different devices. Complex pipelines can be formed from multiple workstreams.</p>
<p>There are four subclasses of <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::Workstream</span></code> that perform the following basic operations</p>
<ul class="simple">
<li><p><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::Decode</span></code>: decode a bitstream to raw frames</p></li>
<li><p><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VideoProcess</span></code>: implement a video processing filter operation with raw frame input and output</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">vpl::Infer</span></code>: invoke a Deep Learning model to infer on a raw frame. Details of this subclass will be provided in a future release.</p></li>
<li><p><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::Encode</span></code>: encode raw frames to a bitstream</p></li>
</ul>
<p>In the <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VideoProcess</span></code> subclass, a sequence of filters with single input and single output running on the same device context can be fused into a single workstream.
Operations executing on different device contexts are separated to different workstreams such that each workstream can always be dispatched to a single device.</p>
<div class="section" id="workstream-internals">
<h3>Workstream Internals<a class="headerlink" href="#workstream-internals" title="Permalink to this headline">¶</a></h3>
<p>Each <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::Workstream</span></code> contains the following members:</p>
<ul class="simple">
<li><p><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VplParams</span></code>: the parameter settings of the workstream, i.e., resolution of the output per session or per frame.</p></li>
<li><p><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::DeviceContext</span></code>: the execution device context of the workstream, i.e., VAAPI, DX, OCL, GL contexts for media, compute and rendering operations</p></li>
</ul>
<p>Workstream per session configurations are set up during workstream initialization using <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VplParams</span></code>. User program can also dynamically modify a workstream’s configuration
frame level control.</p>
</div>
<div class="section" id="initialization-sequence">
<h3>Initialization Sequence<a class="headerlink" href="#initialization-sequence" title="Permalink to this headline">¶</a></h3>
<p>The standard sequence to create a workstream consists of the following steps:</p>
<ol class="arabic simple">
<li><p>Select a device to execute the workstream</p>
<ol class="arabic simple">
<li><p>Create a device context or use an existing device context to execute the workstream</p></li>
</ol>
</li>
<li><p>Get the configuration presets for the selected device</p></li>
<li><p>Create the workstream with the configuration setting <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::config::VPLParams</span></code> and <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::DeviceContext</span></code>.</p></li>
</ol>
<p>The following transcoding example uses three workstreams: <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::Decode</span></code>, <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VideoProcess</span></code> and <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::Encode</span></code>, and shares a single context to execute them together:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;vpl/vpl.hpp&quot;</span><span class="cp"></span>
<span class="cp">#define BUFFER_SIZE 1024 * 1024 * 80</span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">vpl</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>

<span class="c1">// Find all the devices in the system and select a preferred device</span>
<span class="n">DeviceInfo</span> <span class="o">*</span><span class="n">dinfo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DeviceInfo</span><span class="p">();</span>
<span class="n">DeviceInstance</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="n">dinfo</span><span class="o">-&gt;</span><span class="n">GetPreferredDevice</span><span class="p">(</span><span class="n">VPL_WORKSTREAM_DECODE</span> <span class="o">|</span> <span class="n">VPL_WORKSTREAM_VIDEOPROC</span><span class="p">,</span> <span class="n">VPL_WORKSTREAM_ENCODE</span><span class="p">);</span>

<span class="c1">// Get decode preset</span>
<span class="n">config</span><span class="o">::</span><span class="n">VPLParams</span> <span class="o">*</span><span class="n">dconfig</span> <span class="o">=</span> <span class="n">dinfo</span><span class="o">-&gt;</span><span class="n">GetPreset</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_dtype</span><span class="p">,</span> <span class="n">VPL_WORKSTREAM_DECODE</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_id</span><span class="p">);</span>
<span class="c1">// Create a Decode workstream and a device context on the device</span>
<span class="n">Decode</span> <span class="o">*</span><span class="n">decode</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Decode</span><span class="p">(</span><span class="n">dconfig</span><span class="p">,</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

<span class="c1">// Create a VPP workstream, use the same device context as Decode</span>
<span class="n">config</span><span class="o">::</span><span class="n">VPLParams</span> <span class="o">*</span><span class="n">pconfig</span> <span class="o">=</span> <span class="n">dinfo</span><span class="o">-&gt;</span><span class="n">GetVideoProcessPreset</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_dtype</span><span class="p">,</span> <span class="n">VPL_WORKSTREAM_VIDEOPROC</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_id</span><span class="p">);</span>
<span class="n">VideoProcess</span> <span class="o">*</span><span class="n">proc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Process</span><span class="p">(</span><span class="n">pconfig</span><span class="p">,</span> <span class="n">decode</span><span class="o">-&gt;</span><span class="n">GetContext</span><span class="p">());</span>

<span class="c1">// Create an Encode workstream, use the same device context as Decode</span>
<span class="n">config</span><span class="o">::</span><span class="n">VPLParams</span> <span class="o">*</span><span class="n">econfig</span> <span class="o">=</span> <span class="n">dinfo</span><span class="o">-&gt;</span><span class="n">GetEncodePreset</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_dtype</span><span class="p">,</span> <span class="n">VPL_WORKSTEAM_ENCODE</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_id</span><span class="p">);</span>
<span class="n">Encode</span> <span class="o">*</span><span class="n">encode</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Encode</span><span class="p">(</span><span class="n">econfig</span><span class="p">,</span> <span class="n">decode</span><span class="o">-&gt;</span><span class="n">GetContext</span><span class="p">());</span>

<span class="kt">uint8_t</span><span class="o">*</span> <span class="n">pbs</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">uint8_t</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>
<span class="kt">uint8_t</span><span class="o">*</span> <span class="n">pbsout</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">uint8_t</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>

<span class="kt">FILE</span><span class="o">*</span> <span class="n">fInput</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s">&quot;rb&quot;</span><span class="p">);</span>
<span class="kt">FILE</span><span class="o">*</span> <span class="n">fOutput</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">&quot;out.h264&quot;</span><span class="p">,</span> <span class="s">&quot;wb&quot;</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">frameCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// Run the pipeline explicitly</span>
<span class="k">for</span> <span class="p">(</span><span class="n">vplWorkstreamState</span> <span class="n">decode_state</span> <span class="o">=</span> <span class="n">VPL_STATE_READ_INPUT</span><span class="p">;</span>
      <span class="n">decode_state</span> <span class="o">!=</span> <span class="n">VPL_STATE_END_OF_OPERATION</span> <span class="o">&amp;&amp;</span> <span class="n">decode_state</span> <span class="o">!=</span> <span class="n">VPL_STATE_ERROR</span><span class="p">;</span>
      <span class="n">decode_state</span> <span class="o">=</span> <span class="n">decode</span><span class="o">-&gt;</span><span class="n">GetState</span><span class="p">())</span> <span class="p">{</span>
   <span class="n">vplm_mem</span><span class="o">*</span> <span class="n">dec_image</span> <span class="o">=</span>
      <span class="n">decode</span><span class="o">-&gt;</span><span class="n">DecodeFrame</span><span class="p">(</span><span class="n">pbs</span><span class="p">,</span> <span class="n">fread</span><span class="p">(</span><span class="n">pbs</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">BUFFER_SIZE</span><span class="p">,</span> <span class="n">fInput</span><span class="p">));</span>
   <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">dec_image</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
   <span class="n">frameCount</span><span class="o">++</span><span class="p">;</span>

   <span class="n">vplm_mem</span><span class="o">*</span> <span class="n">vpp_image</span> <span class="o">=</span> <span class="n">proc</span><span class="o">-&gt;</span><span class="n">ProcessFrame</span><span class="p">(</span><span class="n">dec_image</span><span class="p">);</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">vpp_image</span><span class="p">)</span> <span class="p">{</span>
      <span class="kt">size_t</span> <span class="n">nbytesout</span> <span class="o">=</span> <span class="n">encode</span><span class="o">-&gt;</span><span class="n">EncodeFrame</span><span class="p">(</span><span class="n">vpp_image</span><span class="p">,</span> <span class="n">pbsout</span><span class="p">);</span>
      <span class="n">fwrite</span><span class="p">(</span><span class="n">pbsout</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">nbytesout</span><span class="p">,</span> <span class="n">fOutput</span><span class="p">);</span>
      <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\r</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">frameCount</span><span class="p">);</span>
      <span class="n">fflush</span><span class="p">(</span><span class="n">stdout</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">done !</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="n">fclose</span><span class="p">(</span><span class="n">fInput</span><span class="p">);</span>
<span class="n">fclose</span><span class="p">(</span><span class="n">fOutput</span><span class="p">);</span>

<span class="k">delete</span><span class="p">[]</span> <span class="n">pbs</span><span class="p">;</span>
<span class="k">delete</span><span class="p">[]</span> <span class="n">pbsout</span><span class="p">;</span>
<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dynamic-setting-control">
<h3>Dynamic Setting Control<a class="headerlink" href="#dynamic-setting-control" title="Permalink to this headline">¶</a></h3>
<p>The <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VplParams</span></code> defines the workstream settings for the device.
User program can use its access functions to read and set the parameters for the workstream.
After modifying configuration settings, a user program needs to call <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vpl::Workstream::UpdateDeviceConfig()</span></code> function to propagate the setting to the
device context. Configuration setting change takes effect in the next processing operation.
The following example changes the output resolution in the middle of a decoding sequence.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Decoding loop</span>
<span class="k">while</span> <span class="p">(</span><span class="n">decode</span><span class="o">-&gt;</span><span class="n">GetState</span><span class="p">()</span> <span class="o">!=</span> <span class="n">VPL_STATE_END_OF_OPERATION</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">vplm_mem</span> <span class="o">*</span><span class="n">image</span> <span class="o">=</span> <span class="n">decode</span><span class="o">-&gt;</span><span class="n">DecodeFrame</span><span class="p">(</span><span class="o">*</span><span class="n">bs_ptr</span><span class="p">,</span> <span class="n">bs_size</span><span class="p">);</span>

   <span class="c1">// Change output resolution</span>
   <span class="k">if</span> <span class="p">(</span><span class="n">need_resize</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">VplVideoSurfaceResolution</span> <span class="n">resol</span> <span class="o">=</span> <span class="p">{</span><span class="mi">480</span><span class="p">,</span> <span class="mi">780</span><span class="p">};</span>
      <span class="n">dconfig</span><span class="o">-&gt;</span><span class="n">SetOutputResolution</span><span class="p">(</span><span class="n">resol</span><span class="p">);</span>

      <span class="c1">// propagate the new settings to the driver</span>
      <span class="n">decode</span><span class="o">-&gt;</span><span class="n">UpdateDeviceConfig</span><span class="p">();</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="decode">
<h3>Decode<a class="headerlink" href="#decode" title="Permalink to this headline">¶</a></h3>
<p>The <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::Decode</span></code> implements elementary stream decode from encoded bitstreams and outputs raw frames.</p>
digraph {
  rankdir=LR;
  Bitstream [shape=record label=&quot;Bitstream&quot; ];
  Decode [shape=record  label=&quot;Decode&quot;];
  Raw [shape=rect];
  Bitstream-&gt;Decode-&gt;Raw;
}<p><strong>Supported bitstream formats</strong></p>
<ul class="simple">
<li><p>h264</p></li>
<li><p>h265</p></li>
</ul>
<p><strong>DecodeFrame C++ interface</strong>:</p>
<p>The decode function <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vpl::Decode::DecodeFrame()</span></code> interface is</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">vplm_mem</span><span class="o">*</span> <span class="n">Decode</span><span class="o">::</span><span class="n">DecodeFrame</span><span class="p">(</span><span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">pbs</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>States</strong>:</p>
<p>During execution, state communicates what the application should do next.</p>
digraph {
  rankdir=LR

  start
  READ_INPUT
  ERROR
  INPUT_BUFFER_FULL
  INPUT_EXCEEDS_BUFFER_SIZE
  END_OF_OPERATION
  end

  start-&gt;READ_INPUT

  READ_INPUT-&gt;READ_INPUT[label=&quot;almost everything happens here&quot;]
  READ_INPUT-&gt;ERROR[label=&quot;internal error&quot;]
  ERROR-&gt;READ_INPUT

  READ_INPUT-&gt;INPUT_BUFFER_FULL[label=&quot;input size&gt;remaining buffer size&quot;]
  INPUT_BUFFER_FULL-&gt;READ_INPUT

  READ_INPUT-&gt;INPUT_EXCEEDS_BUFFER_SIZE[label=&quot;input size&gt;total buffer size&quot;]
  INPUT_EXCEEDS_BUFFER_SIZE-&gt;READ_INPUT

  READ_INPUT-&gt;END_OF_OPERATION[label=&quot;no more to process&quot;]
  END_OF_OPERATION-&gt;end
}<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>State</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>READ_INPUT</p></td>
<td><p>workstream can read bitstream input</p></td>
</tr>
<tr class="row-odd"><td><p>ERROR</p></td>
<td><p>an error occurred during processing, try again</p></td>
</tr>
<tr class="row-even"><td><p>INPUT_BUFFER_FULL</p></td>
<td><p>input size &gt; remaining space in the input bitstream buffer, input ignored and decode operation should be allowed to drain before attempting to add more bitstream again</p></td>
</tr>
<tr class="row-odd"><td><p>INPUT_EXCEEDS_BUFFER_SIZE</p></td>
<td><p>input size&gt; total buffer size</p></td>
</tr>
</tbody>
</table>
<p><strong>Settings</strong>:</p>
<p>Encode configuration parameters are specified in <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VplParamsDecode</span></code>,
which controls per session and per frame settings of the decode operations.</p>
<p><strong>Data model</strong>:</p>
<p>VPL allocates pools of VPL Memory used by decode and consumers of decoded frames.  The application is expected to manage reference counts.  Only surfaces with no external references can be used to decode new frames.</p>
digraph  {
 rankdir=LR
 node [shape=record];
 struct1 [label=&quot;&lt;f0&gt; surface pool|&lt;f1&gt; DecodeFrame&quot;];
 struct3 [label=&quot;&lt;f1&gt; rest of pipeline&quot;];

 struct1:f1 -&gt; struct3:f1 [label=&quot;VPL Memory&quot;];
}<p><strong>Sample code</strong>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;vpl/vpl.hpp&quot;</span><span class="cp"></span>
<span class="cp">#define BUFFER_SIZE 1024 * 1024</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>

  <span class="c1">// Find all the devices in the system and select a preferred device</span>
  <span class="n">DeviceInfo</span> <span class="o">*</span><span class="n">dinfo</span> <span class="o">=</span> <span class="n">new</span> <span class="n">DeviceInfo</span><span class="p">();</span>
  <span class="n">DeviceInstance</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="n">dinfo</span><span class="o">-&gt;</span><span class="n">GetPreferredDevice</span><span class="p">(</span><span class="n">VPL_WORKSTREAM_DECODE</span><span class="p">);</span>

  <span class="c1">// Get decode preset</span>
  <span class="n">VplParamsDecode</span> <span class="o">*</span><span class="n">dconfig</span> <span class="o">=</span> <span class="n">dinfo</span><span class="o">-&gt;</span><span class="n">GetPreset</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_dtype</span><span class="p">,</span> <span class="n">VPL_WORKSTREAM_DECODE</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_id</span><span class="p">);</span>

  <span class="c1">// Create a Decode workstream and a device context on the device</span>
  <span class="n">Decode</span> <span class="o">*</span><span class="n">ws</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Decode</span><span class="p">(</span><span class="n">dconfig</span><span class="p">,</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

  <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">pbs</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">uint8_t</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>

  <span class="kt">FILE</span> <span class="o">*</span><span class="n">fInput</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s">&quot;rb&quot;</span><span class="p">);</span>
  <span class="n">VplFile</span> <span class="o">*</span><span class="n">fOutput</span> <span class="o">=</span> <span class="n">vplOpenFile</span><span class="p">(</span><span class="s">&quot;out.nv12&quot;</span><span class="p">,</span> <span class="s">&quot;wb&quot;</span><span class="p">);</span>

  <span class="n">vplm_mem</span> <span class="o">*</span><span class="n">dec_image</span> <span class="o">=</span> <span class="n">nullptr</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="n">bdrain_mode</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">frameCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">vplWorkstreamState</span> <span class="n">decode_state</span> <span class="o">=</span> <span class="n">VPL_STATE_READ_INPUT</span><span class="p">;</span>

  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">decode_state</span> <span class="o">=</span> <span class="n">ws</span><span class="o">-&gt;</span><span class="n">GetState</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">decode_state</span> <span class="o">==</span> <span class="n">VPL_STATE_END_OF_OPERATION</span> <span class="o">||</span>
        <span class="n">decode_state</span> <span class="o">==</span> <span class="n">VPL_STATE_ERROR</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// read more input if state indicates buffer space</span>
    <span class="c1">// is available</span>
    <span class="kt">uint32_t</span> <span class="n">bs_size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">decode_state</span> <span class="o">==</span> <span class="n">VPL_STATE_READ_INPUT</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="n">bdrain_mode</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">bs_size</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">fread</span><span class="p">(</span><span class="n">pbs</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">BUFFER_SIZE</span><span class="p">,</span> <span class="n">fInput</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">bs_size</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">decode_state</span> <span class="o">==</span> <span class="n">VPL_STATE_INPUT_BUFFER_FULL</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">bdrain_mode</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">bdrain_mode</span><span class="p">)</span>
      <span class="n">dec_image</span> <span class="o">=</span> <span class="n">ws</span><span class="o">-&gt;</span><span class="n">DecodeFrame</span><span class="p">(</span><span class="n">nullptr</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">else</span>
      <span class="n">dec_image</span> <span class="o">=</span> <span class="n">ws</span><span class="o">-&gt;</span><span class="n">DecodeFrame</span><span class="p">(</span><span class="n">pbs</span><span class="p">,</span> <span class="n">bs_size</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">dec_image</span><span class="p">)</span>
      <span class="k">continue</span><span class="p">;</span>

    <span class="n">frameCount</span><span class="o">++</span><span class="p">;</span>

    <span class="n">vplWriteData</span><span class="p">(</span><span class="n">fOutput</span><span class="p">,</span> <span class="n">dec_image</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\r</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">frameCount</span><span class="p">);</span>
    <span class="n">fflush</span><span class="p">(</span><span class="n">stdout</span><span class="p">);</span>

    <span class="n">vplm_unref</span><span class="p">(</span><span class="n">dec_image</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">done !</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
  <span class="n">fclose</span><span class="p">(</span><span class="n">fInput</span><span class="p">);</span>
  <span class="n">vplCloseFile</span><span class="p">(</span><span class="n">fOutput</span><span class="p">);</span>

  <span class="n">delete</span><span class="p">[]</span> <span class="n">pbs</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="encode">
<h3>Encode<a class="headerlink" href="#encode" title="Permalink to this headline">¶</a></h3>
<p>The <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::Encode</span></code> class implements elementary stream encode from raw frame to encoded bitstream.</p>
digraph {
  rankdir=LR;
  Bitstream [shape=record label=&quot;Bitstream&quot; ];
  Encode [shape=record  label=&quot;Encode&quot;];
  Raw [shape=rect];
  Raw-&gt;Encode-&gt;Bitstream;
}<p><strong>Supported bitstream formats</strong></p>
<ul class="simple">
<li><p>h264</p></li>
<li><p>h265</p></li>
</ul>
<p><strong>EncodeFrame C++ interface</strong>:</p>
<p>The encode function <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vpl::Encode::EncodeFrame()</span></code> interface is</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">size_t</span> <span class="n">Encode</span><span class="o">::</span><span class="n">EncodeFrame</span><span class="p">(</span><span class="n">vplm_mem</span><span class="o">*</span> <span class="n">image</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">pbs_out</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>States</strong>:</p>
<p>During execution, state communicates what the application should do next.</p>
digraph {
  rankdir=LR

  start
  READ_INPUT
  ERROR
  OUTPUT_BUFFER_FULL
  OUTPUT_EXCEEDS_BUFFER_SIZE
  END_OF_OPERATION
  end

  start-&gt;READ_INPUT

  READ_INPUT-&gt;READ_INPUT[label=&quot;almost everything happens here&quot;]
  READ_INPUT-&gt;ERROR[label=&quot;internal error&quot;]
  ERROR-&gt;READ_INPUT

  READ_INPUT-&gt;OUTPUT_BUFFER_FULL[label=&quot;output size&gt;remaining buffer size&quot;]
  OUTPUT_BUFFER_FULL-&gt;READ_INPUT

  READ_INPUT-&gt;OUTPUT_EXCEEDS_BUFFER_SIZE[label=&quot;output size&gt;total buffer size&quot;]
  OUTPUT_EXCEEDS_BUFFER_SIZE-&gt;READ_INPUT

  READ_INPUT-&gt;END_OF_OPERATION[label=&quot;no more to process&quot;]
  END_OF_OPERATION-&gt;end
}<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>State</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>READ_INPUT</p></td>
<td><p>workstream can read raw frame input</p></td>
</tr>
<tr class="row-odd"><td><p>ERROR</p></td>
<td><p>an error occurred during processing, try again</p></td>
</tr>
<tr class="row-even"><td><p>OUTPUT_BUFFER_FULL</p></td>
<td><p>output size &gt; remaining space in the output bitstream buffer</p></td>
</tr>
<tr class="row-odd"><td><p>OUTPUT_EXCEEDS_BUFFER_SIZE</p></td>
<td><p>output size&gt; total buffer size</p></td>
</tr>
</tbody>
</table>
<p><strong>Settings</strong>:</p>
<p>Encode configuration parameters are specified in <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VplParamsEncode</span></code>,
which controls per session and per frame settings of the encode operations.</p>
<p><strong>Data model</strong>:</p>
<p>VPL allocates pools of VPL Memory used by decode and consumers of decoded frames.  The application is expected to manage reference counts.  Only surfaces with no external references can be used to decode new frames.</p>
digraph  {
 rankdir=LR
 node [shape=record];
 struct1 [label=&quot;&lt;f0&gt; surface pool|&lt;f1&gt; DecodeFrame&quot;];
 struct3 [label=&quot;&lt;f1&gt; rest of pipeline&quot;];

 struct1:f1 -&gt; struct3:f1 [label=&quot;VPL Memory&quot;];
}<p><strong>Sample code</strong>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;vpl/vpl.hpp&quot;</span><span class="cp"></span>
<span class="cp">#define BUFFER_SIZE 1024 * 1024</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>

  <span class="c1">// Find all the devices in the system and select a preferred device</span>
  <span class="n">DeviceInfo</span> <span class="o">*</span><span class="n">dinfo</span> <span class="o">=</span> <span class="n">new</span> <span class="n">DeviceInfo</span><span class="p">();</span>
  <span class="n">DeviceInstance</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="n">dinfo</span><span class="o">-&gt;</span><span class="n">GetPreferredDevice</span><span class="p">(</span><span class="n">VPL_WORKSTREAM_ENCODE</span><span class="p">);</span>

  <span class="c1">// Get encode preset</span>
  <span class="n">VplParamsEncode</span> <span class="o">*</span><span class="n">dconfig</span> <span class="o">=</span> <span class="n">dinfo</span><span class="o">-&gt;</span><span class="n">GetPreset</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_dtype</span><span class="p">,</span> <span class="n">VPL_WORKSTREAM_ENCODE</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_id</span><span class="p">);</span>

  <span class="c1">// Create an Encode workstream and a device context on the device</span>
  <span class="n">Encode</span> <span class="o">*</span><span class="n">ws</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Encode</span><span class="p">(</span><span class="n">dconfig</span><span class="p">,</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

  <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">pbsout</span><span class="o">=</span><span class="n">new</span> <span class="kt">uint8_t</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>
  <span class="n">VplFile</span><span class="o">*</span> <span class="n">fInput</span> <span class="o">=</span> <span class="n">vplOpenFile</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s">&quot;rb&quot;</span><span class="p">);</span>
  <span class="kt">FILE</span><span class="o">*</span> <span class="n">fOutput</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">&quot;out.h264&quot;</span><span class="p">,</span><span class="s">&quot;wb&quot;</span><span class="p">);</span>

  <span class="n">vplm_mem</span><span class="o">*</span> <span class="n">decimage</span><span class="p">;</span>
  <span class="n">vplm_image_info</span> <span class="n">info</span><span class="o">=</span><span class="p">{};</span>
  <span class="n">info</span><span class="p">.</span><span class="n">width</span><span class="o">=</span><span class="mi">300</span><span class="p">;</span>
  <span class="n">info</span><span class="p">.</span><span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">;</span>
  <span class="n">info</span><span class="p">.</span><span class="n">format</span><span class="o">=</span><span class="n">VPLM_PIXEL_FORMAT_NV12</span><span class="p">;</span>
  <span class="n">vplm_create_cpu_image</span><span class="p">(</span><span class="o">&amp;</span><span class="n">info</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">decimage</span><span class="p">);</span>

  <span class="k">for</span> <span class="p">(;;)</span> <span class="p">{</span>
    <span class="n">vplStatus</span> <span class="n">sts</span><span class="o">=</span><span class="n">vplReadData</span><span class="p">(</span><span class="n">fInput</span><span class="p">,</span><span class="n">decimage</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sts</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
    <span class="n">vplm_ref</span><span class="p">(</span><span class="n">decimage</span><span class="p">);</span>

    <span class="kt">size_t</span> <span class="n">nbytesout</span><span class="o">=</span><span class="n">ws</span><span class="o">-&gt;</span><span class="n">EncodeFrame</span><span class="p">(</span><span class="n">decimage</span><span class="p">,</span><span class="n">pbsout</span><span class="p">);</span>
    <span class="n">fwrite</span><span class="p">(</span><span class="n">pbsout</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">nbytesout</span><span class="p">,</span> <span class="n">fOutput</span><span class="p">);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">);</span>
    <span class="n">fflush</span><span class="p">(</span><span class="n">stdout</span><span class="p">);</span>

  <span class="p">}</span>
  <span class="n">puts</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>

  <span class="n">vplCloseFile</span><span class="p">(</span><span class="n">fInput</span><span class="p">);</span>
  <span class="n">fclose</span><span class="p">(</span><span class="n">fOutput</span><span class="p">);</span>

  <span class="n">delete</span><span class="p">[]</span> <span class="n">pbsout</span><span class="p">;</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="video-processing">
<h3>Video Processing<a class="headerlink" href="#video-processing" title="Permalink to this headline">¶</a></h3>
<p>The <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VideoProcess</span></code> class implements a variety of filter operations.
Current API is limited to single input and single output.</p>
digraph {
  rankdir=LR;
  Raw0 [shape=rect label=&quot;raw&quot; ];
  Decode [shape=record  label=&quot;Decode&quot;];
  Raw [shape=rect label=&quot;raw&quot;];
  Raw0-&gt;Decode-&gt;Raw;
}<p><strong>Supported Filter Operations</strong>
The list of filters will expand based on implementation schedule.
Current release supports the following filters:</p>
<ul class="simple">
<li><p>Resize</p></li>
<li><p>Colorspace conversion (in=i420,nv12,bgra out=i420,nv12,bgra)</p></li>
</ul>
<p><strong>C++ interface</strong>:</p>
<p>The video process function <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vpl::VideoProcess::ProcessFrame()</span></code> interface is</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">vplm_mem</span><span class="o">*</span> <span class="n">VideoProcess</span><span class="o">::</span><span class="n">ProcessFrame</span><span class="p">(</span><span class="n">vplm_mem</span><span class="o">*</span> <span class="n">image</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>States</strong>:</p>
<p>During execution, state communicates what the application should do next.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 45%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>State</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>READ_INPUT</p></td>
<td><p>workstream can read raw input</p></td>
</tr>
<tr class="row-odd"><td><p>ERROR</p></td>
<td><p>an error occurred during processing, try again</p></td>
</tr>
</tbody>
</table>
<p><strong>Settings</strong>:</p>
<p>Video processing configuration parameters are specified in <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vpl::VplParams</span></code>,
which controls per session and per frame settings of the encode operations.
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vpl::VideoProcess::ProcessFrame()</span></code> converts the input image to the output image
according to the output image specification in the settings.</p>
<p><strong>Data model</strong>:</p>
<p>VPL allocates pools of VPL Memory used by frame process and consumers of processed frames.  The application is expected to manage reference counts.  Only surfaces with no external references can be used to for new frame output.</p>
digraph  {
 rankdir=LR
 node [shape=record];
 struct1 [label=&quot;&lt;f0&gt; surface pool|&lt;f1&gt; ProcessFrame&quot;];
 struct3 [label=&quot;&lt;f1&gt; rest of pipeline&quot;];

 struct1:f1 -&gt; struct3:f1 [label=&quot;VPL Memory&quot;];
}<p><strong>Sample code</strong>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;vpl/vpl.hpp&quot;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>

  <span class="c1">// Find all the devices in the system and select a preferred device</span>
  <span class="n">DeviceInfo</span> <span class="o">*</span><span class="n">dinfo</span> <span class="o">=</span> <span class="n">new</span> <span class="n">DeviceInfo</span><span class="p">();</span>
  <span class="n">DeviceInstance</span> <span class="o">*</span><span class="n">dev</span> <span class="o">=</span> <span class="n">dinfo</span><span class="o">-&gt;</span><span class="n">GetPreferredDevice</span><span class="p">(</span><span class="n">VPL_WORKSTREAM_VIDEOPROC</span><span class="p">);</span>

  <span class="c1">// Get vidoe process preset</span>
  <span class="n">VplParams</span> <span class="o">*</span><span class="n">dconfig</span> <span class="o">=</span> <span class="n">dinfo</span><span class="o">-&gt;</span><span class="n">GetPreset</span><span class="p">(</span><span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_dtype</span><span class="p">,</span> <span class="n">VPL_WORKSTREAM_VIDEOPROC</span><span class="p">,</span> <span class="n">dev</span><span class="o">-&gt;</span><span class="n">m_id</span><span class="p">);</span>

  <span class="c1">// Create an Encode workstream and a device context on the device</span>
  <span class="n">VideoProcess</span> <span class="o">*</span><span class="n">ws</span> <span class="o">=</span> <span class="n">new</span> <span class="n">VideoProcess</span><span class="p">(</span><span class="n">dconfig</span><span class="p">,</span> <span class="o">*</span><span class="n">dev</span><span class="p">);</span>

  <span class="c1">// Set output image formats</span>
  <span class="n">VplVideoSurfaceResolution</span> <span class="n">output_size</span> <span class="o">=</span> <span class="p">{</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">};</span>
  <span class="n">dconfig</span><span class="o">-&gt;</span><span class="n">SetOutputResolution</span><span class="p">(</span><span class="n">output_size</span><span class="p">);</span>
  <span class="n">dconfig</span><span class="o">-&gt;</span><span class="n">SetOutputFromat</span><span class="p">(</span><span class="n">VPL_FOURCC_I420</span><span class="p">);</span>

  <span class="c1">// Propagate the settings to the device driver</span>
  <span class="n">ws</span><span class="o">-&gt;</span><span class="n">UpdateDeviceConfig</span><span class="p">();</span>

  <span class="n">VplFile</span><span class="o">*</span> <span class="n">fInput</span> <span class="o">=</span> <span class="n">vplOpenFile</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s">&quot;rb&quot;</span><span class="p">);</span>
  <span class="n">VplFile</span><span class="o">*</span> <span class="n">fOutput</span> <span class="o">=</span> <span class="n">vplOpenFile</span><span class="p">(</span><span class="s">&quot;out.i420&quot;</span><span class="p">,</span> <span class="s">&quot;wb&quot;</span><span class="p">);</span>

  <span class="n">vplm_mem</span><span class="o">*</span> <span class="n">dec_image</span><span class="p">;</span>
  <span class="n">vplm_image_info</span> <span class="n">info</span><span class="o">=</span><span class="p">{};</span>
  <span class="n">info</span><span class="p">.</span><span class="n">width</span><span class="o">=</span><span class="mi">1280</span><span class="p">;</span>
  <span class="n">info</span><span class="p">.</span><span class="n">height</span><span class="o">=</span><span class="mi">720</span><span class="p">;</span>
  <span class="n">info</span><span class="p">.</span><span class="n">format</span><span class="o">=</span><span class="n">VPLM_PIXEL_FORMAT_RGBA</span><span class="p">;</span>
  <span class="n">vplm_create_cpu_image</span><span class="p">(</span><span class="o">&amp;</span><span class="n">info</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dec_image</span><span class="p">);</span>

  <span class="kt">int</span> <span class="n">frameCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(;;)</span> <span class="p">{</span>
    <span class="n">vplStatus</span> <span class="n">sts</span><span class="o">=</span><span class="n">vplReadData</span><span class="p">(</span><span class="n">fInput</span><span class="p">,</span><span class="n">dec_image</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sts</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
    <span class="n">vplm_ref</span><span class="p">(</span><span class="n">dec_image</span><span class="p">);</span>
    <span class="n">frameCount</span><span class="o">++</span><span class="p">;</span>

    <span class="n">vplm_mem</span><span class="o">*</span> <span class="n">vpp_image</span> <span class="o">=</span> <span class="n">ws</span><span class="o">-&gt;</span><span class="n">ProcessFrame</span><span class="p">(</span><span class="n">dec_image</span><span class="p">);</span>

    <span class="n">vplWriteData</span><span class="p">(</span><span class="n">fOutput</span><span class="p">,</span><span class="n">vpp_image</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\r</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">frameCount</span><span class="p">);</span>
    <span class="n">fflush</span><span class="p">(</span><span class="n">stdout</span><span class="p">);</span>
    <span class="n">vplm_unref</span><span class="p">(</span><span class="n">vpp_image</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">done !</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

  <span class="n">vplCloseFile</span><span class="p">(</span><span class="n">fInput</span><span class="p">);</span>
  <span class="n">vplCloseFile</span><span class="p">(</span><span class="n">fOutput</span><span class="p">);</span>


  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="vpl-memory">
<h2>VPL Memory<a class="headerlink" href="#vpl-memory" title="Permalink to this headline">¶</a></h2>
<p>Memory representation and memory allocation are important parts of
VPL API. By default:</p>
<ul class="simple">
<li><p>Each workstream is responsible to allocate its output memory objects
and passes the memory objects to its consumer workstreams.</p></li>
<li><p>For performance, memory objects are passed asynchronously to consumers
before its producer finishes writing to the objects. Hence, a consumer
workstream must first acquire a read access right before reading the
data from the memory object.</p></li>
<li><p>Each memory objects may have multiple consumer workstreams. Hence a
consumer workstream should avoid modifying its input memory objects.
If a consumer workstream needs to modify an input memory object,
it must first acquire a write access right to avoid corrupting
the memory object.</p></li>
</ul>
<p>VPL Memory API provides sharing of 1D buffers and 2D images across
different frameworks (e.g. SYCL, OpenCL, VAAPI, DXVA2) and different
devices (CPU, GPU).  Buffer sharing across the decode, compute and
encode pipeline is important for both performance and portability.</p>
<p>The buffer sharing mechanisms can be classified into 3 types:</p>
<ol class="arabic simple">
<li><p><em>Direct</em> sharing when access is granted to the primary object’s
representation in physical memory, but this happens via different
framework specific logical memory objects (like VAAPI surface or
OpenCL memory). That’s the case when handle from one framework can
be converted to the handle of another framework. For example, via
OpenCL VAAPI Sharing Extension.</p></li>
<li><p><em>Mapping</em> when object is being mapped to the device memory and
framework handle is generated. That’s a typical case for CPU (HOST)
access to the video memory. Underneath implementation might
significantly vary and result in a kind of direct access or
accessing a copy of the memory object with the set of associated
copy and on-the-fly conversion operations. For example, OpenCL
provides two sets of functions: clEnqueueReadBuffer,
clEnqueueWriteBuffer for copying, and clEnqueueMapBuffer for direct
mapping between CPU and OpenCL device.</p></li>
<li><p><em>Coherent</em> sharing when memory object has unified addressing the
physical memory and the underlying hardware and software system
layers assures coherency between these representations as in a
unified shared memory mode.</p></li>
</ol>
<p>The Memory API aims to provide a sharing mechanism with the highest
performance. From this perspective, the library uses “direct” sharing
whenever possible. However, currently, there are a lot of various
restrictions coming from all over the software stack which makes
“direct” sharing unavailable:</p>
<ol class="arabic simple">
<li><p>Framework restrictions where some color formats are not supported,
or lack of capability to import certain memory handle</p></li>
<li><p>Underlying driver implementation (or even HW) restrictions</p></li>
</ol>
<p>As oneAPI software stack evolves, we intend to eliminate the <em>direct</em>
sharing restrictions in the underlying frameworks and drivers through
API extension and implementation enhancement.</p>
<p>The current VPL Memory Library provides the following <em>direct</em> sharing
capabilities:</p>
<ul class="simple">
<li><p>Sharing of CPU (HOST) allocated memory on Linux (via userptr):</p>
<ul>
<li><p>With VAAPI driver</p></li>
<li><p>With OpenCL driver and SYCL</p></li>
</ul>
</li>
<li><p>Sharing of VAAPI allocated memory:</p>
<ul>
<li><p>With OpenCL, SYCL</p></li>
</ul>
</li>
<li><p>Exporting dmabuf handle:</p>
<ul>
<li><p>From VAAPI memory object</p></li>
</ul>
</li>
</ul>
<p>Recall that oneAPI platform is a host and a collection of devices; and
each device has an associated command queue.  Operations on the
devices are executed through submitting tasks to devices’ command
queues.  In the application domain of video processing pipeline, each
device may have multiple command queues corresponding to the media
driver, OpenCL and SYCL compute drivers and 3D graphics drivers.  For
Intel’s GPU on Linux, a VAAPI driver executes tasks for video
decoding, post processing and encoding, an OpenCL driver executes
tasks for compute such as DL inference, and an OpenGL driver executes
tasks for 3D rendering. Buffers and images allocated by these drivers
are initially only accessible in the context of their corresponding
command queues.  To share a buffer between a source and a sink command
queues, VPL Memory library must extract the buffer address from the
source command queue context, map the address to the sink command
queue context, such that, tasks in the sink command queue can now read
or write to the buffer.  We call this &lt;command_queue,buffer&gt; pair a
memory handler. Memory handlers are encapsulated in the
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vplm::memory</span></code> class hierarchy.</p>
<p>To share a buffer to a device driver command queue context, just
simply constructs a new memory handler of the corresponding derived
class from the base <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vplm::memory</span></code> object.  For instance,
the code above converts a CPU allocated memory to a GPU VAAPI surface
for media processing.</p>
<p>In addition to the buffer sharing API in vplm::*:memory
subclass constructors, VPL Memory API also provides:</p>
<ul class="simple">
<li><p>API to import memory already allocated by the application external
to VPL Memory library</p></li>
<li><p>API to allocate memory</p></li>
</ul>
<p>The memory import and allocation functions are defined in
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vplm::cpu::make_memory()</span></code>, <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vplm::opencl::make_memory()</span></code>,
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vplm::sycl::make_memory()</span></code>, and <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">vplm::vaapi::make_memory()</span></code>.</p>
<div class="section" id="creating-memory-objects">
<h3>Creating memory objects<a class="headerlink" href="#creating-memory-objects" title="Permalink to this headline">¶</a></h3>
<p>An application can use the VPL Memory Library to create a memory
object for one of the supported frameworks. For example, the following
code allocates memory in system memory (we count CPU (HOST) as one of
the frameworks):</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;om++.h&gt;</span><span class="cp"></span>

<span class="n">vplm</span><span class="o">::</span><span class="n">cpu</span><span class="o">::</span><span class="n">memory</span> <span class="n">yuv_image</span> <span class="o">=</span> <span class="n">vplm</span><span class="o">::</span><span class="n">cpu</span><span class="o">::</span><span class="n">make_memory</span><span class="p">(</span><span class="mi">1920</span><span class="p">,</span> <span class="mi">1080</span><span class="p">,</span> <span class="n">VPLM_PIXEL_FORMAT_NV12</span><span class="p">);</span>
</pre></div>
</div>
<p>or it can allocate memory externally and request the VPL Memory
Library to manage it as in the following example for VAAPI:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;om++.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;om_vaapi++.h&gt;</span><span class="cp"></span>

<span class="n">VADisplay</span> <span class="n">dpy</span><span class="p">;</span>
<span class="n">VASurfaceID</span> <span class="n">id</span><span class="p">;</span>
<span class="n">vaCreateSurfaces</span><span class="p">(</span><span class="n">dpy</span><span class="p">,</span> <span class="n">VA_RT_FORMAT_RGB32</span><span class="p">,</span> <span class="mi">1920</span><span class="p">,</span> <span class="mi">1080</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">id</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">attribs</span><span class="p">,</span> <span class="n">num_attribs</span><span class="p">);</span>

<span class="n">vplm</span><span class="o">::</span><span class="n">vaapi</span><span class="o">::</span><span class="n">memory</span> <span class="n">rgb_image</span> <span class="o">=</span> <span class="n">vplm</span><span class="o">::</span><span class="n">vaapi</span><span class="o">::</span><span class="n">make_surface</span><span class="p">(</span><span class="n">dpy</span><span class="p">,</span> <span class="n">id</span><span class="p">);</span>
</pre></div>
</div>
<p>In either case, it ends up with the framework specific C++ object (in
our examples <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vplm::cpu::memory</span></code> or
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vplm::vaapi::memory</span></code>), and hence, have access to the
framework specific API defined by VPL Memory for this object. For
example, the following code will access CPU allocated image (via
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vplm::cpu_image</span></code> representation):</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">vplm</span><span class="o">::</span><span class="n">cpu_image</span> <span class="n">image</span><span class="p">;</span>
<span class="n">yuv_image</span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="n">VPLM_ACCESS_MODE_READ</span><span class="p">,</span> <span class="n">image</span><span class="p">);</span>

<span class="c1">// do something with the image since you have access to data pointers:</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Y data pointer: %p</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">image</span><span class="p">.</span><span class="n">data</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>

<span class="n">yuv_image</span><span class="p">.</span><span class="n">unmap</span><span class="p">(</span><span class="n">image</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="helper-class-for-simplifying-image-data-access">
<h3>Helper Class for Simplifying Image Data Access<a class="headerlink" href="#helper-class-for-simplifying-image-data-access" title="Permalink to this headline">¶</a></h3>
<p>In the examples above we directly used a memory object to access its
data. While this is possible, there is a simpler way. Most frameworks
require a program to acquire and release access to data. For the CPU
access example, we saw calls to map and unmap to acquire/release
access to the data. Using the <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vplm::cpu_image</span></code> helper
class eliminates the need to map and unmap:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="n">vplm</span><span class="o">::</span><span class="n">cpu</span><span class="o">::</span><span class="n">image</span> <span class="n">cpu_image</span><span class="p">(</span><span class="n">yuv_image</span><span class="p">,</span> <span class="n">VPLM_ACCESS_MODE_READ</span><span class="p">);</span>

  <span class="c1">// do something with the image since you have access to data pointers:</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Y data pointer: %p</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">image</span><span class="p">.</span><span class="n">data</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This helper class issues acquire and release operations to mark
start/stop data access in constructor and destructor.  Another
“feature” of these helper classes is that they accept base
memory object (<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vplm::memory</span></code>) in constructors. This means that we can
use helper classes to make implicit conversion between different
framework objects. For example, with the following we will map our
VAAPI image on to CPU:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="n">vplm</span><span class="o">::</span><span class="n">cpu</span><span class="o">::</span><span class="n">image</span> <span class="n">cpu_image</span><span class="p">(</span><span class="n">rgb_image</span><span class="p">,</span> <span class="n">VPLM_ACCESS_MODE_WRITE</span><span class="p">);</span>

  <span class="c1">// do something with the image since you have access to data pointers:</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;R data pointer: %p</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">image</span><span class="p">.</span><span class="n">data</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Usage example
The following example summarize the key usage scenario:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;om++.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;om_vaapi++.h&gt;</span><span class="cp"></span>

<span class="n">VADisplay</span> <span class="n">dpy</span> <span class="o">=</span> <span class="n">init_vaapi</span><span class="p">();</span>
<span class="n">VASurfaceID</span> <span class="n">id</span> <span class="o">=</span> <span class="n">create_per_my_needs</span><span class="p">();</span> <span class="c1">// calls vaCreateSurfaces inside</span>

<span class="n">vplm</span><span class="o">::</span><span class="n">cpu</span><span class="o">::</span><span class="n">memory</span> <span class="n">yuv_image</span> <span class="o">=</span> <span class="n">vplm</span><span class="o">::</span><span class="n">cpu</span><span class="o">::</span><span class="n">make_memory</span><span class="p">(</span><span class="mi">1920</span><span class="p">,</span> <span class="mi">1080</span><span class="p">,</span> <span class="n">VPLM_PIXEL_FORMAT_NV12</span><span class="p">);</span>
<span class="n">vplm</span><span class="o">::</span><span class="n">vaapi</span><span class="o">::</span><span class="n">memory</span> <span class="n">rgb_image</span> <span class="o">=</span> <span class="n">vplm</span><span class="o">::</span><span class="n">vaapi</span><span class="o">::</span><span class="n">make_surface</span><span class="p">(</span><span class="n">dpy</span><span class="p">,</span> <span class="n">id</span><span class="p">);</span>

<span class="p">{</span>
  <span class="n">vplm</span><span class="o">::</span><span class="n">cpu</span><span class="o">::</span><span class="n">image</span> <span class="n">cpu_image</span><span class="p">(</span><span class="n">yuv_image</span><span class="p">,</span> <span class="n">VPLM_ACCESS_MODE_WRITE</span><span class="p">);</span>

  <span class="c1">// do something with the image since you have access to data pointers:</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Y data pointer: %p</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">image</span><span class="p">.</span><span class="n">data</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
  <span class="c1">// for example, write data into the surface</span>
<span class="p">}</span>

<span class="p">{</span>
  <span class="n">vplm</span><span class="o">::</span><span class="n">vaapi</span><span class="o">::</span><span class="n">image</span> <span class="n">vaapi_cpu_image</span><span class="p">(</span><span class="n">dpy</span><span class="p">,</span> <span class="n">yuv_image</span><span class="p">);</span>
  <span class="n">vplm</span><span class="o">::</span><span class="n">vaapi</span><span class="o">::</span><span class="n">image</span> <span class="n">vaapi_rgb_image</span><span class="p">(</span><span class="n">dpy</span><span class="p">,</span> <span class="n">rgb_image</span><span class="p">);</span> <span class="c1">// just for consistency</span>

  <span class="c1">// do something with surfaces via VAAPI since we have access to them</span>
  <span class="c1">// for example, convert yuv which we just wrote on CPU to rgb format</span>
  <span class="n">convert_yuv_to_rgb</span><span class="p">(</span><span class="n">vaapi_cpu_image</span><span class="p">.</span><span class="n">id</span><span class="p">(),</span> <span class="n">vaapi_rgb_image</span><span class="p">.</span><span class="n">id</span><span class="p">())</span>
<span class="p">}</span>

<span class="p">{</span>
  <span class="n">vplm</span><span class="o">::</span><span class="n">cpu</span><span class="o">::</span><span class="n">image</span> <span class="n">cpu_image</span><span class="p">(</span><span class="n">rgb_image</span><span class="p">,</span> <span class="n">VPLM_ACCESS_MODE_READ</span><span class="p">);</span>

  <span class="c1">// now we can read from the CPU data which we got in rgb image after VAAPI conversion:</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;R data pointer: %p</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">image</span><span class="p">.</span><span class="n">data</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The VPL API defines 4 different helper classes, one for each supported device context:
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vplm::cpu::image</span></code>
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vplm::opencl::image</span></code>,
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vplm::sycl::memory</span></code> and
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">vplm::vaapi::image</span></code>.</p>
</div>
</div>
<div class="section" id="vpl-api-reference">
<h2>VPL API Reference<a class="headerlink" href="#vpl-api-reference" title="Permalink to this headline">¶</a></h2>
<div class="section" id="device">
<span id="device-api"></span><h3>Device<a class="headerlink" href="#device" title="Permalink to this headline">¶</a></h3>
<div class="section" id="vpl-deviceinfo">
<h4>vpl::DeviceInfo<a class="headerlink" href="#vpl-deviceinfo" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenenum: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenstruct: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
</div>
<div class="section" id="device-context-api">
<span id="id2"></span><h3>Device Context<a class="headerlink" href="#device-context-api" title="Permalink to this headline">¶</a></h3>
<div class="section" id="vpl-devicecontext">
<h4>vpl::DeviceContext<a class="headerlink" href="#vpl-devicecontext" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
</div>
<div class="section" id="config-setting-api">
<span id="id3"></span><h3>Workstream Settings<a class="headerlink" href="#config-setting-api" title="Permalink to this headline">¶</a></h3>
<div class="section" id="vpl-vplparams">
<h4>vpl::VplParams<a class="headerlink" href="#vpl-vplparams" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
</div>
<div class="section" id="decode-settings">
<h3>Decode Settings<a class="headerlink" href="#decode-settings" title="Permalink to this headline">¶</a></h3>
<div class="section" id="vpl-vplparamsdecode">
<h4>vpl::VplParamsDecode<a class="headerlink" href="#vpl-vplparamsdecode" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
</div>
<div class="section" id="encode-settings">
<h3>Encode Settings<a class="headerlink" href="#encode-settings" title="Permalink to this headline">¶</a></h3>
<div class="section" id="vpl-vplparamsencode">
<h4>vpl::VplParamsEncode<a class="headerlink" href="#vpl-vplparamsencode" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
</div>
<div class="section" id="workstreams">
<span id="workstream-api"></span><h3>Workstreams<a class="headerlink" href="#workstreams" title="Permalink to this headline">¶</a></h3>
<div class="section" id="vplworkstreamtype">
<h4>VplWorkstreamType<a class="headerlink" href="#vplworkstreamtype" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenenum: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
</div>
<div class="section" id="id4">
<h3>Workstream<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="section" id="vpl-workstream">
<h4>vpl::Workstream<a class="headerlink" href="#vpl-workstream" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="workstream-decode">
<h4>Workstream::Decode<a class="headerlink" href="#workstream-decode" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenenum: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="workstream-encode">
<h4>Workstream::Encode<a class="headerlink" href="#workstream-encode" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="workstream-videoprocess">
<h4>Workstream::VideoProcess<a class="headerlink" href="#workstream-videoprocess" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
</div>
<div class="section" id="memory">
<h3>Memory<a class="headerlink" href="#memory" title="Permalink to this headline">¶</a></h3>
<div class="section" id="vplm-cpu-image">
<h4>vplm::cpu_image<a class="headerlink" href="#vplm-cpu-image" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplm-memory">
<h4>vplm::memory<a class="headerlink" href="#vplm-memory" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplm-cpu-memory">
<h4>vplm::cpu::memory<a class="headerlink" href="#vplm-cpu-memory" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="id5">
<h4>vplm::cpu::image<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplm-cpu-make-memory">
<h4>vplm::cpu::make_memory<a class="headerlink" href="#vplm-cpu-make-memory" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygennamespace: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplm-opencl-memory">
<h4>vplm::opencl::memory<a class="headerlink" href="#vplm-opencl-memory" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplm-opencl-image">
<h4>vplm::opencl::image<a class="headerlink" href="#vplm-opencl-image" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplm-opencl-make-memory">
<h4>vplm::opencl::make_memory<a class="headerlink" href="#vplm-opencl-make-memory" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygennamespace: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplm-sycl-memory">
<h4>vplm::sycl::memory<a class="headerlink" href="#vplm-sycl-memory" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplm-sycl-make-memory">
<h4>vplm::sycl::make_memory<a class="headerlink" href="#vplm-sycl-make-memory" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygennamespace: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplm-vaapi-memory">
<h4>vplm::vaapi::memory<a class="headerlink" href="#vplm-vaapi-memory" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplm-vaapi-image">
<h4>vplm::vaapi::image<a class="headerlink" href="#vplm-vaapi-image" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplm-vaapi-make-memory">
<h4>vplm::vaapi::make_memory<a class="headerlink" href="#vplm-vaapi-make-memory" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygennamespace: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
</div>
<div class="section" id="miscellaneous">
<h3>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h3>
<div class="section" id="vplstatus">
<h4>vplStatus<a class="headerlink" href="#vplstatus" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenenum: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplcodectype">
<h4>VplCodecType<a class="headerlink" href="#vplcodectype" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenenum: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplfourcc">
<h4>VplFourCC<a class="headerlink" href="#vplfourcc" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenenum: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplcrop">
<h4>VplCrop<a class="headerlink" href="#vplcrop" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenstruct: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplaspectratio">
<h4>VplAspectRatio<a class="headerlink" href="#vplaspectratio" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenstruct: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplencodepreset">
<h4>VplEncodePreset<a class="headerlink" href="#vplencodepreset" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenenum: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplencodescenario">
<h4>VplEncodeScenario<a class="headerlink" href="#vplencodescenario" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenenum: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplbrc">
<h4>VplBRC<a class="headerlink" href="#vplbrc" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenenum: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplframerate">
<h4>VplFrameRate<a class="headerlink" href="#vplframerate" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenstruct: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplversion">
<h4>VplVersion<a class="headerlink" href="#vplversion" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenstruct: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
<div class="section" id="vplloglevel">
<h4>vplLogLevel<a class="headerlink" href="#vplloglevel" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenenum: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneVPL\doxygen\xml\index.xml</p>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../oneMKL/source/index.html" class="btn btn-neutral float-right" title="oneMKL 0.7" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../oneTBB/source/timing/tick_count_cls.html" class="btn btn-neutral float-left" title="tick_count class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Intel Corporation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>