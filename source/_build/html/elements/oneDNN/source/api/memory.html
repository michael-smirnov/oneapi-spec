

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Memory &mdash; oneAPI Specification 0.7 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../_static/favicons.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Primitives" href="primitives.html" />
    <link rel="prev" title="Stream" href="stream.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://oneapi.com" class="icon icon-home"> oneAPI Specification
          

          
            
            <img src="../../../../_static/oneAPI-rgb-rev-100.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../library-interop.html">Library Interoperability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../elements.html">oneAPI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dpcpp/source/index.html">DPC++ 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDPL/source/index.html">oneDPL 0.7</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">oneDNN 0.7</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#open-source-implementation">Open Source Implementation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#api">API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="engine.html">Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="stream.html">Stream</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="primitives.html">Primitives</a></li>
<li class="toctree-l3"><a class="reference internal" href="utilities.html">Utility Types and Definitions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#testing">Testing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneCCL/source/index.html">oneCCL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../l0/source/index.html">Level Zero 0.91</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneDAL/source/index.html">oneDAL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneTBB/source/nested-index.html">oneTBB 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneVPL/source/index.html">oneVPL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../oneMKL/source/index.html">oneMKL 0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../versions.html">HTML and PDF Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../notices.html">Legal Notices and Disclaimers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">oneAPI Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">oneAPI Specification</a> &raquo;</li>
        
          
          <li><a href="../index.html">oneDNN 0.7</a> </li>
          
        
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/oneapi-src/oneapi-spec/blob/master/source/elements/oneDNN/source/api/memory.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="memory">
<h1>Memory<a class="headerlink" href="#memory" title="Permalink to this headline">¶</a></h1>
<p>Memory object is container that describes and stores data. Memory objects can
contain data of various data types and formats. There are two levels of
abstraction:</p>
<ol class="arabic">
<li><p><em>Memory descriptor</em> – engine-agnostic logical description of data (number
of dimensions, dimension sizes, and data type), and, optionally, the
information about the physical format of data in memory. If this
information is not known yet, a memory descriptor can be created with
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">dnnl::memory::format_tag::any</span></code>. This allows compute-intensive
primitives to chose the most appropriate format for the computations.  The
user is then responsible for reordering their data into the new format if
the formats do not match.</p>
<p>A memory descriptor can be initialized either by specifying dimensions, and
memory format tag or strides for each of them.</p>
<p>User can query amount of memory required by a memory descriptor using the
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">dnnl::memory::desc::get_size()</span></code> function. The size of data in
general cannot be computed as the product of dimensions multiplied by the
size of the data type. So users are required to use this function for
better code portability.</p>
<p>Two memory descriptors can be compared using the equality and inequality
operators.  The comparison is especially useful when checking whether it is
necessary to reorder data from the user’s data format to a primitive’s
format.</p>
</li>
<li><p><em>Memory object</em> – an engine-specific object that handles the data and its
description (a memory descriptor). With USM, the data handle is simply a
pointer to <code class="docutils literal notranslate"><span class="pre">void</span></code>. The data handle can be queried using
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">dnnl::memory::get_data_handle()</span></code> and set using
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">dnnl::memory::set_data_handle()</span></code>. The underlying SYCL buffer, when
used, can be queried using <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">dnnl::memory::get_sycl_buffer()</span></code> and
and set using <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">dnnl::memory::set_sycl_buffer()</span></code>. A memory object
can also be queried for the underlying memory descriptor and for its engine
using <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">dnnl::memory::get_desc()</span></code> and
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">dnnl::memory::get_engine()</span></code>.</p></li>
</ol>
<p>Along with ordinary memory descriptors with all dimensions being positive, the
library supports <em>zero-volume</em> memory descriptors with one or more dimensions
set to zero. This is used to support the NumPy* convention. If a zero-volume
memory is passed to a primitive, the primitive typically does not perform any
computations with this memory. For example:</p>
<ul class="simple">
<li><p>A concatenation primitive would ignore all memory object with zeroes in the
concat dimension / axis.</p></li>
<li><p>A forward convolution with a source memory object with zero in the minibatch
dimension would always produce a destination memory object with a zero in the
minibatch dimension and perform no computations.</p></li>
<li><p>However, a forward convolution with a zero in one of the weights dimensions
is ill-defined and is considered to be an error by the library because there
is no clear definition on what the output values should be.</p></li>
</ul>
<p>Data handle of a zero-volume memory is never accessed.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenstruct: Cannot find file: C:\Users\smirnovm\Documents\repos\oneapi-spec\source\elements\oneDNN\doxygen\xml\index.xml</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="primitives.html" class="btn btn-neutral float-right" title="Primitives" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="stream.html" class="btn btn-neutral float-left" title="Stream" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Intel Corporation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>